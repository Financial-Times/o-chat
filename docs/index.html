<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width" charset="utf-8">
    <title>o-chat</title>
    <link rel="stylesheet" href="http://getbootstrap.com/2.3.2/assets/css/bootstrap.css">
    <link rel="stylesheet" href="http://getbootstrap.com/2.3.2/assets/css/bootstrap-responsive.css">
    <link rel="stylesheet" href="http://getbootstrap.com/2.3.2/assets/css/docs.css">
    <style>
      body > .navbar .brand {
        float:left;
        text-shadow: rgba(255, 255, 255, 0.0980392) 0px 1px 0px, rgba(255, 255, 255, 0.4) 0px 0px 30px;
        color: white;
        margin-left:0px;
        font-weight:normal;
      }
      
      .bs-docs-sidenav.affix {
        box-shadow: 0 0 20px 1px rgba(0, 0, 0, 0.5);
        z-index: 10;
      }
      
      .bs-docs-sidenav i{
        width: 8px;
        height: 8px;
        padding: 0px;
        margin: 0px;
        display: inline-block;
        margin-right:0.5em;
      }
      
      .bs-docs-sidenav > li > a {
          word-wrap: break-word;
      }
      
      .bs-docs-sidenav > li:first-child > a {
        border-top-right-radius: 6px;
        border-top-left-radius: 6px;
      }
      
      code[class*="language-"],pre[class*="language-"]{color:black;text-shadow:0 1px white;font-family:Consolas,Monaco,'Andale Mono',monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*="language-"]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*="language-"],pre[class*="language-"]{background:#f5f2f0}:not(pre)>code[class*="language-"]{padding:.1em;border-radius:.3em}.token.comment,.token.prolog,.token.doctype,.token.cdata{color:slategray}.token.punctuation{color:#999}.namespace{opacity:.7}.token.property,.token.tag,.token.boolean,.token.number{color:#905}.token.selector,.token.attr-name,.token.string{color:#690}.token.operator,.token.entity,.token.url,.language-css .token.string,.style .token.string{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.regex,.token.important{color:#e90}.token.important{font-weight:bold}.token.entity{cursor:help}
      div.description {margin: 14px 0; padding-top: 14px; border-bottom:1px solid #eee; }
      .tags {}
      .ctx-type {
        display:inline-block;
        margin-right:0.5em;
        //- float:right; margin-top:8px
      }
      
      footer iframe{vertical-align:middle;}
      
    </style>
  </head>
  <body data-spy="scroll" data-target=".scrollspy">
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container"><a class="brand">Doxx</a>
          <div class="nav-collapse collapse">
            <ul class="nav pull-right sponsored"></ul>
          </div>
        </div>
      </div>
    </div>
    <header id="overview" class="jumbotron subhead">
      <div class="container">
        <h1>o-chat</h1>
        <p class="lead"></p>
      </div>
    </header>
    <div class="container">
      <div class="row">
        <div class="span3 bs-docs-sidebar">
          <ul class="nav nav-list bs-docs-sidenav affix-top">
            <li class="active"><a href="index.html">Main</a></li>
            <li><a href="auth.js.html">auth.js</a></li>
            <li><a href="config.js.html">config.js</a></li>
            <li><a href="globalEvents.js.html">globalEvents.js</a></li>
            <li><a href="i18n.js.html">i18n.js</a></li>
            <li><a href="main.js.html">main.js</a></li>
            <li><a href="MessageQueue.js.html">MessageQueue.js</a></li>
            <li><a href="NewCommentNotification.js.html">NewCommentNotification.js</a></li>
            <li><a href="userDialogs.js.html">userDialogs.js</a></li>
            <li><a href="utils.js.html">utils.js</a></li>
            <li><a href="Widget.js.html">Widget.js</a></li>
            <li><a href="WidgetUi.js.html">WidgetUi.js</a></li>
          </ul>
          <div class="scrollspy">
            <ul class="nav nav-list bs-docs-sidenav affix-top">
            </ul>
          </div>
        </div>
        <div class="span9">
          <section id="Main"><h1>o-chat</h1>
<p>Commenting widget built on top of data APIs provided by o-comment-data module. This Widget uses both SUDS (Session user data service) and CCS (Comment creation service).</p><hr>
<h2>How to use it</h2>
<p>There are two ways of using this module:</p><h3>Build tool</h3>
<p>Include the script provided by the build tool.<br />The script exposes a global variable named <code>oChat</code>.</p><h3>Bower</h3>
<p>As a bower dependency:</p><p><strong>Javascript:</strong></p><pre><code class="lang-javascript">var oChat = require(&#39;o-chat&#39;);
</code></pre>
<p><strong>SCSS:</strong></p><pre><code class="lang-ccs">@import &#39;o-chat/main&#39;;
</code></pre>
<p>The module should be built using <code>browserify</code> (with <code>debowerify</code> and <code>textrequireify</code> transform).</p><h2>Configuration</h2>
<p><strong>The methods which are meant to configure the module are the following:</strong></p><h3>init</h3>
<p>This method is responsible for changing the default configuration used by this module. Calling this method with an object will merge the default configuration with the object specified (deep merge, primitive type values of the same key will be overwritten).</p><p>In order to use this module with authentication enabled, you should specify the user&#39;s session ID:</p><pre><code class="lang-javascript">oChat.init({
    sessionId: &#39;sessID&#39;
});
</code></pre>
<h5>Default configuration</h5>
<pre><code class="lang-javascript">{
    &quot;livefyre&quot;: {
        &quot;network&quot;: &quot;ft.fyre.co&quot;
    }
}
</code></pre>
<h5>Change the environment</h5>
<p>In order to change to the TEST environment, use the following code (o-comment-data should be switched to TEST env as well):</p><pre><code class="lang-javascript">{
    &quot;livefyre&quot;: {
        &quot;network&quot;: &quot;ft-1.fyre.co&quot;
    },
    &quot;dependencies&quot;: {
        &quot;o-comment-data&quot;: {
            &quot;suds&quot;: {
                &quot;baseUrl&quot;: &quot;http://test.session-user-data.webservices.ft.com&quot;
            },
            &quot;ccs&quot;: {
                &quot;baseUrl&quot;: &quot;http://test.comment-creation.webservices.ft.com&quot;
            },
            &quot;cacheConfig&quot;: {
                &quot;authBaseName&quot;: &quot;comments-test-auth-&quot;,
                &quot;initBaseName&quot;: &quot;comments-test-init-&quot;
            },
            &quot;livefyre&quot;: {
                &quot;networkName&quot;: &quot;ft-1&quot;
            }
        }
    }
}
</code></pre>
<hr>
<h2>Integration</h2>
<p>This integration considers that you have included the script using one of the methods mentioned in the <code>How to use it</code> section.</p><p>The following functions are used only for purpose of illustration, but they are not available as part of this module:</p><ul>
<li>readCookie</li>
<li>login</li>
</ul>
<p><strong>Common steps:</strong></p><p>Read the user&#39;s session:</p><pre><code class="lang-javascript">var userSession = readCookie(&#39;FTSession&#39;);
</code></pre>
<p>Set the user&#39;s session if one is available:</p><pre><code class="lang-javascript">oChat.init({
    sessionId: userSession
});
</code></pre>
<p>Listen on the &#39;login required&#39; event, and try to log in the user within the page:</p><pre><code class="lang-javascript">oChat.auth.on(&#39;loginRequired.authAction&#39;, function (delegate) {
    // the user is not logged in, but an action was performed within the comment widget that requires the user to be logged in

    login();
    if (loggedIn) {
        delegate.success();
    } else if (loginRefused) {
        delegate.failure();
    } else if (loginFailure) {
        delegate.failure();
    }
});
</code></pre>
<p><strong>Important: if the log in needs a page reload, don&#39;t call the failure function!</strong></p><h3>Integration - programatically</h3>
<p>Create an instance of the Widget with the parameters that are available:</p><pre><code class="lang-javascript">var widgetInstance = new oChat.Widget({
    elId: &#39;container-id&#39;,
    title: document.title,
    url: document.location.href,
    articleId: &#39;ID-of-the-article&#39;,
    order: &#39;inverted&#39;,
    datetimeFormat: {
        minutesUntilAbsoluteTime: -1,
        absoluteFormat: &#39;MMM dd hh:mm a&#39;
    }
});
</code></pre>
<p>Listen the events the widget triggers (optional):</p><pre><code class="lang-javascript">widgetInstance.on(tracking.postComment, function (evt) {
    // a comment is posted, do something, track it
});
</code></pre>
<p>Load the widget:</p><pre><code class="lang-javascript">widgetInstance.load();
</code></pre>
<h3>Integration - using DOM element</h3>
<p>The Widget will be created using data from a DOM element.</p><p>Include this where you want the widget to load:</p><pre><code class="lang-html">&lt;div class=&quot;o-chat&quot; id=&quot;commentWidget&quot; data-o-chat-autoconstruct=&quot;true&quot; data-o-chat-config-title=&quot;title-of-the-article&quot; data-o-chat-config-url=&quot;page-url&quot; data-o-chat-config-articleId=&quot;ID-of-the-article&quot;&gt;&lt;/div&gt;
</code></pre>
<p>In order to build the DOM element, follow the steps:</p><ol>
<li>Add class o-chat to the container element</li>
<li>Add attribute <code>data-o-chat-autoconstruct=&quot;true&quot;</code></li>
<li>Specify a unique ID</li>
<li>Add configuration options that you want to pass to the widget in the following form: data-o-chat-{configName}=&quot;{configValue}&quot;. Replace <code>{configName}</code> and <code>{configValue}</code> with the name of the configuration and value you want to pass.</li>
</ol>
<p>If you need a reference of the JavaScript object created, you can listen the event on the body element the following way:</p><pre><code class="lang-javascript">var widgetInstance;
document.body.addEventListener(&#39;oChat.domConstruct&#39;, function (evt) {
    if (evt.detail.id === &#39;commentWidget&#39;) {
        widgetInstance = evt.detail.instance;
    }
});
</code></pre>
<p>where evt.detail.id is the ID of the DOM element (in this example <code>commentWidget</code>).</p><p>When done with the configuration of the widget, adding event listeners, etc., execute the following to initiate the widget generation:</p><pre><code class="lang-javascript">oChat.initDomConstruct();
</code></pre>
<p><strong>You don&#39;t have to wait until the document is fully loaded, call it whenever you are done with the configurations.</strong></p><hr>
<h5>Events</h5>
<h3>Widget level events</h3>
<p>Widget level events are triggered on the container of the widget. They have the following format:<br /><code>oChat.nameOfTheEvent</code>, where &#39;nameOfTheEvent&#39; is one of the following mentioned below.</p><p>All events has also a payload data to identify the widget from which the event is coming from, and also specific event data if there&#39;s some, which has the following format:</p><pre><code class="lang-javascript">{
    detail: {
        id: &quot;idOfTheWidget&quot;,
        widget: widgetInstance,
        data: {...} //data specific to the event
    }
}
</code></pre>
<p>There&#39;s also an easier way to listen to widget level events, with the following function:</p><pre><code class="lang-javascript">widgetInstance.on(&#39;nameOfTheEvent&#39;, function (evt) {
    // event handler
});
</code></pre>
<p><em>Please note that you should omit the namespace (oChat.) before the event name.</em></p><p>Using the <code>off</code> method event handlers can be removed.</p><p>The list of events are:</p><h5>widget.timeout</h5>
<p>Triggered when loading the widget exceeded a given time.</p><h6>error.resources</h6>
<p>Error while loading the resources.<br />Event detail data: error object/message.</p><h6>error.init</h6>
<p>Error while loading the initialization data and the comments.<br />Event detail data: error object/message.</p><h6>error.widget</h6>
<p>Triggered when any error appear (triggered together with the above mentioned error events).<br />Event detail data: error object/message.</p><h5>data.init</h5>
<p>Loaded when the initialization is finished and the necessary data is obtained.<br />Event detail data: initialization data in the following form:</p><pre><code class="lang-javascript">{
    &quot;collection&quot;: {
        &quot;unclassified&quot;: false,
        &quot;collectionId&quot;: &quot;91440735&quot;,
        &quot;lastEvent&quot;: 1411541039265900,
        &quot;comments&quot;: [{
            &quot;parentId&quot;: &quot;&quot;,
            &quot;author&quot;: {
                &quot;displayName&quot;: &quot;roli main&quot;,
                &quot;tags&quot;: [&quot;FT&quot;],
                &quot;type&quot;: 1
            },
            &quot;content&quot;: &quot;&lt;p&gt;comment&lt;/p&gt;&quot;,
            &quot;timestamp&quot;: 1411541039,
            &quot;commentId&quot;: &quot;216743299&quot;,
            &quot;visibility&quot;: 1
        }],
        &quot;totalPages&quot;: &quot;6&quot;
    }
}
</code></pre>
<h5>data.auth</h5>
<p>The first time the auth object is loaded, it is broadcasted using this event. Event detail data: authentication and user detail data in the following form:</p><pre><code class="lang-javascript">{
    &quot;token&quot;: &quot;eyJhbGciOiJIUzI1NiJ9.eyJkb21haW4iOiJmdC0xLmZ5cmUuY28iLCJleHBpcmVzIjoxNDE3MTE2Nzk5LCJ1c2VyX2lkIjoiODk0ODc0MzkiLCJkaXNwbGF5X25hbWUiOiJyb2xpIG1haW4ifQ.maN1bKWvDQLA-mvgNp9lSKdI9Izj9rmX3XrEaVwUTNY&quot;,
    &quot;expires&quot;: 1417116799,
    &quot;displayName&quot;: &quot;user pseudonym&quot;,
    &quot;settings&quot;: {
        &quot;emailcomments&quot;: &quot;never&quot;,
        &quot;emailreplies&quot;: &quot;never&quot;,
        &quot;emaillikes&quot;: &quot;never&quot;,
        &quot;emailautofollow&quot;: &quot;off&quot;
    }
}
</code></pre>
<h5>widget.ready</h5>
<p>The widget is ready to be rendered, the initialization process has finished.</p><h5>widget.renderComplete</h5>
<p>The UI is fully rendered.</p><h5>tracking.postComment</h5>
<p>A comment is posted.<br />Event detail data:</p><ul>
<li>collectionId</li>
<li>info about the comment:<ul>
<li>id</li>
<li>bodyHtml: the content of the comment</li>
<li>author:<ul>
<li>displayName: the author&#39;s pseudonym</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5>tracking.deleteComment</h5>
<p>A comment is deleted within the widget.<br />Event detail data:</p><ul>
<li>collectionId</li>
<li>info about the comment:<ul>
<li>id</li>
</ul>
</li>
</ul>
<h3>Module level events</h3>
<p>These events are triggered on the <code>body</code> element. They have the same format as the widget level events: <code>oChat.nameOfTheEvent</code>, where nameOfTheEvent is one of the following below.</p><p>The payload data consists only of event specific data:</p><pre><code class="lang-javascript">{
    detail: {...} // event specific data
}
</code></pre>
<p>The events are the following:</p><h5>auth.login</h5>
<p>Triggered when a user is successfully logged in.<br />Payload is the jwt token with which the user is logged in.</p><h5>auth.logout</h5>
<p>Triggered when a user is logged out.</p><h5>auth.loginRequired</h5>
<p>Triggered on any activity which explicitly requires a logged in status. This could mean from the product perspective that the user is not logged in, or his/her login status expired (e.g. session expire).</p><p>The payload data contains two functions: success and failure. Based on the outcome of the login process, one of these should be called by the handler.<br /><strong>Important: if the log in needs a page reload, don&#39;t call the failure function!</strong></p><pre><code class="lang-javascript">oChat.auth.on(&#39;auth.loginRequired&#39;, function (evt) {
    if (logInSuccess) {
        evt.detail.success();
    }

    if (logInFails || logInRefused) {
        evt.detail.failure();
    }
});
</code></pre>
<hr>
<h2>More about the submodules</h2>
<h3>Widget</h3>
<p>Widget incorporates all aspects of a commenting Widget: handling data and creating the UI.</p><h5>Configuration</h5>
<p>To create an instance, you need to provide a configuration object. This should have the following structure:</p><h6>Mandatory fields:</h6>
<ul>
<li>elId: ID of the HTML element in which the widget should be loaded</li>
<li>articleId: ID of the article, any string</li>
<li>url: canonical URL of the page</li>
<li>title: Title of the page</li>
</ul>
<h6>Optional fields:</h6>
<ul>
<li><p>order: This specifies how the widget is built. It can have two values:</p><ul>
<li>normal: the commenting box is placed on top of the comment stream, and the comments are ordered as newest on top.</li>
<li><p>inverted: the commenting box is placed at the bottom of the comment stream, and the comments are ordered newest on bottom.</p><p>Default value is &#39;normal&#39;.</p></li>
</ul>
</li>
<li><p>layout: Specifies the layout style of the widget. It can have two values:</p><ul>
<li>normal: When placed in the main area of the page.</li>
<li><p>side: When placed in the side area of the page.</p><p>Default value is &#39;normal&#39;.</p></li>
</ul>
</li>
<li>datetimeFormat: How to format the timestamps. This is an object and has two fields:<ul>
<li>minutesUntilAbsoluteTime: specifies after how many minutes to switch from relative time to absolute. If -1 is specified, the timestamps will be in the absolute format immediately. By default it is set to 14 days.</li>
<li>absoluteFormat: specifies the format with which the absolute timestamp is rendered. For more information about the possible values please visit: <a href="https://github.com/Financial-Times/o-date#o-dateformatdate-tpl">https://github.com/Financial-Times/o-date#o-dateformatdate-tpl</a></li>
</ul>
</li>
</ul>
<h5>Methods</h5>
<h6>load</h6>
<p>This method initiates loading the necessary data to load the widget (e.g. comments, user authentication info), and using the data generates the UI elements within the page.</p><p>This method can be called once (calling it multiple types will have no effect).</p><h6>adaptToHeight</h6>
<p>Calling this method with a height in pixels as parameter will adapt the UI to shrink within that height. If the current UI is smaller, it will fill the space to occupy the full height, or if the current UI is taller, a scroll will appear on the comments.</p><h6>getWidgetEl</h6>
<p>Returns the DOM element of the widget container.</p><h6>on</h6>
<p>With this method you can listen to events generated by the widget instance.</p><h6>off</h6>
<p>With this method event handlers attached with <code>on</code> can be deleted.</p><h5>Properties</h5>
<p>Available on any instance of Widget.</p><h6>config</h6>
<p>This is the config object passed as a parameter populated with default configuration items where those are not provided.</p><h6>ui</h6>
<p>Instance of WidgetUi, which is linked to the widget&#39;s DOM. Any call to this instance would affect only the widget&#39;s UI.<br />Methods available:</p><ul>
<li>scrollToWidget: scrolls the page to the widget&#39;s position.</li>
<li>addNotAvailableMessage: adds a not available message into the container</li>
<li>clearContainer: clears the widget&#39;s container.</li>
<li>render: renders the widget using the comments specified as a parameter. This method also registers the necessary event handlers.</li>
<li>adaptToHeight: calling this method with a height in pixels as parameter will adapt the UI to shrink within that height. If the current UI is smaller, it will fill the space to occupy the full height, or if the current UI is taller, a scroll will appear on the comments.</li>
<li>disableButtonPagination: hides the buttons for pagination.</li>
<li>login: Changes the login button to the user&#39;s pseudonym. Parameters: token, pseudonym, isAdmin.</li>
<li>logout: Changes the user&#39;s pseudonym with a login button.</li>
<li>getCurrentPseudonym: Reads the current pseudonym from the UI. <strong>Important: this pseudonym is a truncated version (50 chars) of the original pseudonym.</strong></li>
<li>hideSignInLink: hide the sign in link. It is useful when the user is logged in logically, but doesn&#39;t have a pseudonym.</li>
<li>makeReadOnly: Makes the editor and submit button read only, useful when posting a commenting and waiting for the server&#39;s response.</li>
<li>makeEditable: Changes the read only state of the editor to editable.</li>
<li>addComment: Add new comment to the comment list. Parameters:<ul>
<li>commentData:<ul>
<li>id</li>
<li>content</li>
<li>timestamp</li>
<li>displayName</li>
</ul>
</li>
<li>ownComment: if it is the user&#39;s own comment and the comment area has scroll, the comment area is scrolled to this comment.</li>
<li>adminMode: if true, delete button is added.</li>
</ul>
</li>
<li>addNextPageComments: on pagination inserts a list of comments into the page.</li>
<li>removeComment: removes a comment from the comment list.</li>
<li>markCommentAsDeleteInProgress: fades out a comment while deleting is in progress.</li>
<li>markCommentAsDeleteInProgressEnded: opposite of the action above, restores the normal look of the comment.</li>
<li>getCurrentComment: returns the content of the editor.</li>
</ul>
<h6>collectionId</h6>
<p>Livefyre&#39;s collection ID for the current article. <strong>Populated only after the widget is loaded (<code>load</code> function)!</strong></p><h6>timeout</h6>
<p>Seconds after a timeout is considered when loading the widget.</p><h3>auth</h3>
<p>This submodule is responsible for handling the user&#39;s authentication status.</p><h5>Methods</h5>
<h6>login</h6>
<p>This method tries to obtain authentication data about the user, and decides if the user is logged in or not.</p><p>Example:</p><pre><code class="lang-javascript">auth.login(function (loginStatus, authData) {
    if (loginStatus) {
        // make it visible in the UI
        ui.login(authData.token, authData.displayName, authData.moderator);
    } else {
        if (authData.pseudonym === false) {
            // the user doesn&#39;t have a pseudonym, but basically the user could be logged in.
            ui.hideSignInLink();
        }
    }
});
</code></pre>
<p>The login method should be provided with a callback parameter, which will get two paramters:</p><ul>
<li>loginStatus: true if the user is logged in, false if isn&#39;t.</li>
<li>authData: authData </li>
</ul>
<h6>logout</h6>
<p>This method broadcasts a logout event to every module that are listening to it.</p><h6>loginRequired</h6>
<p>Using this method you can explicitly request an authenticated status. It handles different scenarios:</p><ul>
<li>user already has authentication data, so it can be logged in</li>
<li>user has no pseudonym, ask for pseudonym</li>
<li>user has session expired, ask to log in again</li>
<li>user is not authenticated, ask to log in</li>
</ul>
<p>Parameters:</p><ul>
<li>delegate: Optional. An object can be added with two functions: success and failure. If the login process ends successfully, delegate.success is called. If the login process fails or it is refused by the user, delegate.failure is called.</li>
<li>force: Optional. If true, the local cache is ignored and the web service is directly asked for the login status.</li>
</ul>
<hr>
<h2>Logging</h2>
<p>Logging can be enabled for debugging purposes. It logs using the global &#39;console&#39; if available (if not, nothing happens and it degrades gracefully).<br />By default logging is disabled.</p><h3>enableLogging</h3>
<p>This method enables logging of the module.</p><h3>disableLogging</h3>
<p>This method disables logging of the module.</p><h3>setLoggingLevel</h3>
<p>This method sets the logging level. This could be a number from 0 to 4 (where 0 is debug, 4 is error), or a string from the available methods of &#39;console&#39; (debug, log, info, warn, error).<br />Default is 3 (warn).</p></section>
        </div>
      </div>
    </div>
    <footer class="footer">
      <div class="container">
        <p>Documentation generated with <a href="https://github.com/FGRibreau/doxx">Doxx </a> created by <a href="https://twitter.com/FGRibreau" data-show-count="false" class="twitter-follow-button">Francois-Guillaume Ribreau </a></p>
        <p>Doxx is sponsored by <a href="http://bringr.net/?btt" title="Outil d'analyse des rÃ©seaux sociaux" class="bringr">Bringr </a> and <a href="https://redsmin.com/?btt" title="Full Redis GUI" class="redsmin">Redsmin</a></p>
        <p>Theme borrowed from Twitter Bootstrap</p>
      </div>
    </footer>
    <script src="http://platform.twitter.com/widgets.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
    <script src="http://leaverou.github.com/prefixfree/prefixfree.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-transition.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-scrollspy.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-dropdown.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-collapse.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-affix.js"></script>
    <script>
      /**
       * Prism: Lightweight, robust, elegant syntax highlighting
       * MIT license http://www.opensource.org/licenses/mit-license.php/
       * @author Lea Verou http://lea.verou.me
       */(function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,t=self.Prism={util:{type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){var n=t.util.type(e);switch(n){case"Object":var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=t.util.clone(e[i]));return r;case"Array":return e.slice()}return e}},languages:{extend:function(e,n){var r=t.util.clone(t.languages[e]);for(var i in n)r[i]=n[i];return r},insertBefore:function(e,n,r,i){i=i||t.languages;var s=i[e],o={};for(var u in s)if(s.hasOwnProperty(u)){if(u==n)for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a]);o[u]=s[u]}return i[e]=o},DFS:function(e,n){for(var r in e){n.call(e,r,e[r]);t.util.type(e)==="Object"&&t.languages.DFS(e[r],n)}}},highlightAll:function(e,n){var r=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code');for(var i=0,s;s=r[i++];)t.highlightElement(s,e===!0,n)},highlightElement:function(r,i,s){var o,u,a=r;while(a&&!e.test(a.className))a=a.parentNode;if(a){o=(a.className.match(e)||[,""])[1];u=t.languages[o]}if(!u)return;r.className=r.className.replace(e,"").replace(/\s+/g," ")+" language-"+o;a=r.parentNode;/pre/i.test(a.nodeName)&&(a.className=a.className.replace(e,"").replace(/\s+/g," ")+" language-"+o);var f=r.textContent;if(!f)return;f=f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00a0/g," ");var l={element:r,language:o,grammar:u,code:f};t.hooks.run("before-highlight",l);if(i&&self.Worker){var c=new Worker(t.filename);c.onmessage=function(e){l.highlightedCode=n.stringify(JSON.parse(e.data));l.element.innerHTML=l.highlightedCode;s&&s.call(l.element);t.hooks.run("after-highlight",l)};c.postMessage(JSON.stringify({language:l.language,code:l.code}))}else{l.highlightedCode=t.highlight(l.code,l.grammar);l.element.innerHTML=l.highlightedCode;s&&s.call(r);t.hooks.run("after-highlight",l)}},highlight:function(e,r){return n.stringify(t.tokenize(e,r))},tokenize:function(e,n){var r=t.Token,i=[e],s=n.rest;if(s){for(var o in s)n[o]=s[o];delete n.rest}e:for(var o in n){if(!n.hasOwnProperty(o)||!n[o])continue;var u=n[o],a=u.inside,f=!!u.lookbehind||0;u=u.pattern||u;for(var l=0;l<i.length;l++){var c=i[l];if(i.length>e.length)break e;if(c instanceof r)continue;u.lastIndex=0;var h=u.exec(c);if(h){f&&(f=h[1].length);var p=h.index-1+f,h=h[0].slice(f),d=h.length,v=p+d,m=c.slice(0,p+1),g=c.slice(v+1),y=[l,1];m&&y.push(m);var b=new r(o,a?t.tokenize(h,a):h);y.push(b);g&&y.push(g);Array.prototype.splice.apply(i,y)}}}return i},hooks:{all:{},add:function(e,n){var r=t.hooks.all;r[e]=r[e]||[];r[e].push(n)},run:function(e,n){var r=t.hooks.all[e];if(!r||!r.length)return;for(var i=0,s;s=r[i++];)s(n)}}},n=t.Token=function(e,t){this.type=e;this.content=t};n.stringify=function(e){if(typeof e=="string")return e;if(Object.prototype.toString.call(e)=="[object Array]"){for(var r=0;r<e.length;r++)e[r]=n.stringify(e[r]);return e.join("")}var i={type:e.type,content:n.stringify(e.content),tag:"span",classes:["token",e.type],attributes:{}};i.type=="comment"&&(i.attributes.spellcheck="true");t.hooks.run("wrap",i);var s="";for(var o in i.attributes)s+=o+'="'+(i.attributes[o]||"")+'"';return"<"+i.tag+' class="'+i.classes.join(" ")+'" '+s+">"+i.content+"</"+i.tag+">"};if(!self.document){self.addEventListener("message",function(e){var n=JSON.parse(e.data),r=n.language,i=n.code;self.postMessage(JSON.stringify(t.tokenize(i,t.languages[r])));self.close()},!1);return}var r=document.getElementsByTagName("script");r=r[r.length-1];if(r){t.filename=r.src;document.addEventListener&&!r.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",t.highlightAll)}})();;
      Prism.languages.markup={comment:/&lt;!--[\w\W]*?--(&gt;|&gt;)/g,prolog:/&lt;\?.+?\?&gt;/,doctype:/&lt;!DOCTYPE.+?&gt;/,cdata:/&lt;!\[CDATA\[[\w\W]+?]]&gt;/i,tag:{pattern:/&lt;\/?[\w:-]+\s*(?:\s+[\w:-]+(?:=(?:("|')(\\?[\w\W])*?\1|\w+))?\s*)*\/?&gt;/gi,inside:{tag:{pattern:/^&lt;\/?[\w:-]+/i,inside:{punctuation:/^&lt;\/?/,namespace:/^[\w-]+?:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/gi,inside:{punctuation:/=|&gt;|"/g}},punctuation:/\/?&gt;/g,"attr-name":{pattern:/[\w:-]+/g,inside:{namespace:/^[\w-]+?:/}}}},entity:/&amp;#?[\da-z]{1,8};/gi};Prism.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.replace(/&amp;/,"&"))});;
      Prism.languages.css={comment:/\/\*[\w\W]*?\*\//g,atrule:/@[\w-]+?(\s+[^;{]+)?(?=\s*{|\s*;)/gi,url:/url\((["']?).*?\1\)/gi,selector:/[^\{\}\s][^\{\}]*(?=\s*\{)/g,property:/(\b|\B)[a-z-]+(?=\s*:)/ig,string:/("|')(\\?.)*?\1/g,important:/\B!important\b/gi,ignore:/&(lt|gt|amp);/gi,punctuation:/[\{\};:]/g};Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{style:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/style(>|&gt;)/ig,inside:{tag:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)|(&lt;|<)\/style(>|&gt;)/ig,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.css}}});;
      Prism.languages.clike={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|\/\/.*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|catch|finally|null|break|continue)\b/g,"boolean":/\b(true|false)\b/g,number:/\b-?(0x)?\d*\.?[\da-f]+\b/g,operator:/[-+]{1,2}|!|=?&lt;|=?&gt;|={1,2}|(&amp;){1,2}|\|?\||\?|\*|\//g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g};;
      Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(var|let|if|else|while|do|for|return|in|instanceof|function|new|with|typeof|try|catch|finally|null|break|continue)\b/g,number:/\b(-?(0x)?\d*\.?[\da-f]+|NaN|-?Infinity)\b/g});Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0}});Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/script(>|&gt;)/ig,inside:{tag:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)|(&lt;|<)\/script(>|&gt;)/ig,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript}}});;
      
    </script>
    <!-- App js-->
    <script>
      $(function(){
        var $window = $(window);
        $('.scrollspy .nav').affix({
          offset: {
            top: function () { return $window.width() <= 980 ? 480 : 400 }
          , bottom: 50
          }
        });
      })
    </script>
  </body>
</html>